<!doctype html><html lang="en">
<!-- Mirrored from thadeusb.com/weblog/2009/03/09/rotate_sprite_towards_point/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 31 Jan 2019 17:05:58 GMT -->
<head><title>Rotate Sprite Towards Point - ThadeusB</title><meta charset="utf-8"><meta name=author content="Thadeus Burgess" /><meta name=description content="Smoothly turn a sprite towards a desired located based on a turning speed. Implemented in python for use with pygame, however the concepts can easily be taken to any other programming language. Class a_sprite()"/><meta name=keywords content="python, ai, robots, game, game_design, pygame, python, rotation, sprite, vector_2d, rotate, point"/><meta name=robots content="index, follow" /><link rel="shortcut icon" href="https://thadeusb.com/static/favicon.ico" type="image/x-icon" /><link href="http://fonts.googleapis.com/css?family=Rubik|Aclonica|Averia+Libre" rel="stylesheet"><link href="../../../../../../use.fontawesome.com/aaf60b2b39.css" rel="stylesheet"> <link rel="stylesheet" type="text/css" href="https://thadeusb.com/static/gen/app.css?5d06cfbf"><link rel="stylesheet" type="text/css" media="print" href="https://thadeusb.com/static/gen/print.css?39bef004"><meta name="viewport" content="width=device-width" /><meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@thadeusb"> <meta name="twitter:creator" content="@thadeusb"> <meta name="twitter:title" content="Rotate Sprite Towards Point"> <meta name="twitter:description" content="Smoothly turn a sprite towards a desired located based on a turning speed. Implemented in python for use with pygame, however the concepts can easily be taken to any other programming language. Class a_sprite()"> <meta name="twitter:image" content="../../../../../index.html"></head><body class="weblog rotate_sprite_towards_point  "><div class="container"><header class="header"><h1>Hi, I'm <a href="../../../../../index.html">Thadeus<span>B</span></a>.</h1><small>I code stuff. I raise bees. I game.</small></header><main class="content"><article lang="en" class="weblog" itemscope itemtype="//schema.org/BlogPosting"><link itemprop="url" href="index.html"><header><div id="article-title"></div><h2><a itemprop="name" href="index.html">Rotate Sprite Towards Point</a></h2></header><section><p>Smoothly turn a sprite towards a desired located based on a turning speed. Implemented in python for use with pygame, however the concepts can easily be taken to any other programming language.</p><div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">a_sprite</span><span class="p">():</span>
    <span class="n">TURN_SPEED</span> <span class="o">=</span> <span class="mf">5.25</span> <span class="c1"># radians degree&#39;s</span>

    <span class="k">def</span> <span class="nf">change_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desired_pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Turns the sprite in the direction given</span>
<span class="sd">         desired_pos - desired coordinates for the sprite to look at.</span>
<span class="sd">               ex: (x, y) - (128, 256)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Create a vector of the desired position</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">desired_pos</span><span class="p">)</span>
        <span class="c1">#Get the normalized vector between sprites current position and</span>
        <span class="c1"># the destination vector. This is the heading to destination.</span>
        <span class="n">new_heading</span> <span class="o">=</span> <span class="n">Vector2</span><span class="o">.</span><span class="n">from_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">,</span><span class="n">destination</span><span class="p">)</span><span class="o">.</span><span class="n">normalized</span><span class="p">()</span>

        <span class="c1">#Calculate the angle between current heading (normalized vector) and</span>
        <span class="c1"># the new heading.</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">heading</span><span class="o">.</span><span class="n">get_angle_between</span><span class="p">(</span><span class="n">new_heading</span><span class="p">)</span>

        <span class="c1">#Clamp it to turn speed</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clamp</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="o">-</span><span class="n">TURN_SPEED</span><span class="p">,</span> <span class="n">TURN_SPEED</span><span class="p">)</span>

        <span class="c1">#Rotate our heading vector accordingly</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">heading</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>

        <span class="c1">#Now calculate displacement and movement as normal with the newheading.</span>

    <span class="k">def</span> <span class="nf">clamp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">higher</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Clamps a value between low and high &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="n">higher</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">higher</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="n">lower</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">lower</span>
        <span class="k">return</span> <span class="n">val</span>

<span class="c1">#Example needed methods from the vector2 class</span>
<span class="k">class</span> <span class="nc">Vector2</span><span class="p">():</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_vectors</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a Vector2 object between two Vector2</span>
<span class="sd">        v1 -- First Vector2</span>
<span class="sd">        v2 -- Second Vector2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Vector2</span><span class="p">((</span><span class="n">v2</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">v1</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="p">(</span><span class="n">v2</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">v1</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isnormalized</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span>
        <span class="k">if</span> <span class="n">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">/=</span> <span class="n">length</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">/=</span> <span class="n">length</span>

    <span class="k">def</span> <span class="nf">get_angle_between</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">cross</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">dot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">cross</span><span class="p">,</span> <span class="n">dot</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">dot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">cross</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle_degrees</span><span class="p">):</span>
        <span class="n">radians</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle_degrees</span><span class="p">)</span>
        <span class="n">cos</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">radians</span><span class="p">)</span>
        <span class="n">sin</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">cos</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">sin</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">sin</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">cos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
</pre></div><p>Any questions feel free to ask.</p><p>Vector2 Class: <a href="http://hg.thadeusb.com/Games/PyBTS/raw-file/f7473ac7857e/src/pybts/vector.py">Download</a> (altered from <a href="http://www.pygame.org/wiki/2DVectorClass">pygame wiki</a> vec2d class)</p></section><hr><aside><p><span class="article-author" itemprop="author" itemscope itemtype="//schema.org/Person"><span itemprop="name">Thadeus Burgess</span></span><time datetime="2009-03-09" itemprop="datePublished">2009-03-09</time>— in <a href="../../../../index.html" itemprop="genre">Weblog</a></p></aside><nav><a class="prev" href="../../15/svn_vs_hg_vs_git_vs_bzr/index.html">Version Control Systems Compared - Subversion vs Mercurial vs Git vs Bazaar</a> |<a class="next" href="../../../02/20/online_personal_finance_tools/index.html">Online Personal Finance Tools</a><div class="related"><h6>Related Entries <small>(in order of similarity)</small></h6><ul><li><a href="../../../04/15/pygame_font_and_py2exe/index.html">pygame font and py2exe</a></li><li><a href="../../25/pygame_event_input_wrapper/index.html">Pygame Event Input Wrapper</a></li><li><a href="../../../../2012/10/18/safe_calculator/index.html">Safe Calculator In Python</a></li><li><a href="../../../../2011/08/17/manage_python_virtualenv/index.html">Seemless Python VirtualEnv Integration</a></li><li><a href="../../../../2010/10/10/python_scale_hex_color/index.html">Scale a hex color in Python</a></li><li><a href="../../../../2010/09/03/sqlalchemy_record_instance_item_access/index.html">Getting fresh with SQLAlchemy</a></li></ul></div></nav></article></main><nav class="sidebar"><ul><li class="home"><a href="../../../../../index.html">Home</a></li><li class="weblog active"><a href="../../../../index.html">Weblog</a></li><li class="recipes"><a href="../../../../../recipes/index.html">Recipes</a></li><li class="projects"><a href="../../../../../projects/index.html">Projects</a></li><li class="contact"><a href="../../../../../pages/contact/index.html">Contact</a></li></ul></nav><footer class="footer"><p>&copy; 2017 Thadeus Burgess— <a href="mailto:thadeusb@thadeusb.com" title="E-Mail"><i class="fa fa-fw fa-envelope"></i></a>— <a href="https://github.com/thadeusb" title="GitHub"><i class="fa fa-fw fa-github"></i></a>— <a href="https://www.linkedin.com/in/thadeusb/" title="LinkedIn"><i class="fa fa-fw fa-linkedin"></i></a></p></footer></div><div id="gear-container"><div id="gear"></div></div><script src="../../../../../../ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> <script type="text/javascript" src="https://thadeusb.com/static/gen/app.js?35034e78"></script><!--  GOOGLE ANALYTICS --> <script>var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-7293044-1']);_gaq.push(['_trackPageview']);(function() {  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);})();</script></body>
<!-- Mirrored from thadeusb.com/weblog/2009/03/09/rotate_sprite_towards_point/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 31 Jan 2019 17:05:58 GMT -->
</html>