<!doctype html><html lang="en">
<!-- Mirrored from thadeusb.com/weblog/2009/04/15/pygame_font_and_py2exe/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 31 Jan 2019 17:05:50 GMT -->
<head><title>pygame font and py2exe - ThadeusB</title><meta charset="utf-8"><meta name=author content="Thadeus Burgess" /><meta name=description content="If you get the errors at the bottom of this post while trying to use  pygame.font.Font or pygame.font.SysFont and py2exe here is a simple fix. Be sure to include &#39;pygame&#39; as a package to your py2exe script. Also you will  need to copy SDL.dll and SDL_"/><meta name=keywords content="python, ai, robots, distribution, memoryloadlibrary, myrts, py2exe, pygame, pygame_font, python, font"/><meta name=robots content="index, follow" /><link rel="shortcut icon" href="https://thadeusb.com/static/favicon.ico" type="image/x-icon" /><link href="http://fonts.googleapis.com/css?family=Rubik|Aclonica|Averia+Libre" rel="stylesheet"><link href="../../../../../../use.fontawesome.com/aaf60b2b39.css" rel="stylesheet"> <link rel="stylesheet" type="text/css" href="https://thadeusb.com/static/gen/app.css?5d06cfbf"><link rel="stylesheet" type="text/css" media="print" href="https://thadeusb.com/static/gen/print.css?39bef004"><meta name="viewport" content="width=device-width" /><meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@thadeusb"> <meta name="twitter:creator" content="@thadeusb"> <meta name="twitter:title" content="pygame font and py2exe"> <meta name="twitter:description" content="If you get the errors at the bottom of this post while trying to use  pygame.font.Font or pygame.font.SysFont and py2exe here is a simple fix. Be sure to include &#39;pygame&#39; as a package to your py2exe script. Also you will  need to copy SDL.dll and SDL_"> <meta name="twitter:image" content="../../../../../index.html"></head><body class="weblog pygame_font_and_py2exe  "><div class="container"><header class="header"><h1>Hi, I'm <a href="../../../../../index.html">Thadeus<span>B</span></a>.</h1><small>I code stuff. I raise bees. I game.</small></header><main class="content"><article lang="en" class="weblog" itemscope itemtype="//schema.org/BlogPosting"><link itemprop="url" href="index.html"><header><div id="article-title"></div><h2><a itemprop="name" href="index.html">pygame font and py2exe</a></h2></header><section><p>If you get the errors at the bottom of this post while trying to use pygame.font.Font or pygame.font.SysFont and py2exe here is a simple fix.</p><p>Be sure to include 'pygame' as a package to your py2exe script. Also you will need to copy SDL.dll and SDL_ttf.dll from the pygame directory. If you use the default python font you will also need to include that as well.</p><p>I have been wrecking my brain the last two and a half days trying to solve this problem.</p><p>In my last attempt at solving the problem, I figured "Heck, it won't hurt to grab every DLL from system32, pygame and what ever else I could find and put them in my dist directory". I almost cried with joy when it worked! I narrowed it down to SDL.dll and SDL_ttf.dll are the magick files.</p><p>Is this a bug that py2exe does not find these and include them automatically? Using optimize 2, bundle_files 1, nozip</p><p>Helpful code:</p><div class="codehilite"><pre><span></span><span class="n">pygamedir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pygamedir</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">get_default_font</span><span class="p">()),</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pygamedir</span><span class="p">,</span> <span class="s1">&#39;SDL.dll&#39;</span><span class="p">),</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pygamedir</span><span class="p">,</span> <span class="s1">&#39;SDL_ttf.dll&#39;</span><span class="p">)</span>
</pre></div><p>Relative Tracebacks: MemoryLoadLibrary</p><div class="codehilite"><pre><span></span>Traceback (most recent call last):
File &quot;myrts.py&quot;, line 1, in &lt;module&gt;
File &quot;zipextimporter.pyo&quot;, line 82, in load_module
File &quot;scene.pyo&quot;, line 23, in &lt;module&gt;
File &quot;zipextimporter.pyo&quot;, line 82, in load_module
File &quot;world.pyo&quot;, line 31, in &lt;module&gt;
File &quot;zipextimporter.pyo&quot;, line 82, in load_module
File &quot;tileengine.pyo&quot;, line 32, in &lt;module&gt;
File &quot;zipextimporter.pyo&quot;, line 82, in load_module
File &quot;widgets.pyo&quot;, line 18, in &lt;module&gt;
File &quot;zipextimporter.pyo&quot;, line 98, in load_module
ImportError: MemoryLoadLibrary failed loading pygame
</pre></div><p>ont.pyd</p><p>DLL load failed</p><div class="codehilite"><pre><span></span>Traceback (most recent call last):
File &quot;myrts.py&quot;, line 1, in &lt;module&gt;
File &quot;scene.pyo&quot;, line 23, in &lt;module&gt;
File &quot;world.pyo&quot;, line 31, in &lt;module&gt;
File &quot;tileengine.pyo&quot;, line 32, in &lt;module&gt;
File &quot;widgets.pyo&quot;, line 18, in &lt;module&gt;
File &quot;pygame
</pre></div><p>ont.pyo", line 12, in <module> File "pygameont.pyo", line 10, in __load ImportError: DLL load failed: The specified module could not be found.</p><p>NotImplementedError font module not available</p><div class="codehilite"><pre><span></span>MyRTSdistMy RTS.exe:68: RuntimeWarning: use font: MemoryLoadLibrary failed loading pygame/f
</pre></div><p>ont.pyd Traceback (most recent call last):File "myrts.py", line 106, inFile "myrts.py", line 75, in runFile "scene.pyo", line 97, in loadFile "widgets.pyo", line 107, in <strong>init</strong> #loads the pygame.font module here.File "pygame<strong>init</strong>.pyo", line 70, in <strong>getattr</strong> NotImplementedError: font module not available</p><p><strong>Note:</strong> For some reason py2exe regards the SDL_ttf.dll file as a system owned dll and excludes it from the distribution package. That is why this error is being received.</p><p>To override this you can use a trick found in py2exe's FAQ. Like this:</p><div class="codehilite"><pre><span></span><span class="n">origIsSystemDLL</span> <span class="o">=</span> <span class="n">py2exe</span><span class="o">.</span><span class="n">build_exe</span><span class="o">.</span><span class="n">isSystemDLL</span>
<span class="k">def</span> <span class="nf">isSystemDLL</span><span class="p">(</span><span class="n">pathname</span><span class="p">):</span>
       <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">pathname</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;sdl_ttf.dll&quot;</span><span class="p">]:</span>
               <span class="k">return</span> <span class="mi">0</span>
       <span class="k">return</span> <span class="n">origIsSystemDLL</span><span class="p">(</span><span class="n">pathname</span><span class="p">)</span>
<span class="n">py2exe</span><span class="o">.</span><span class="n">build_exe</span><span class="o">.</span><span class="n">isSystemDLL</span> <span class="o">=</span> <span class="n">isSystemDLL</span>
</pre></div><p>This will make sure that the SDL_ttf.dll isn't recognized as a system dll.</p></section><hr><aside><p><span class="article-author" itemprop="author" itemscope itemtype="//schema.org/Person"><span itemprop="name">Thadeus Burgess</span></span><time datetime="2009-04-15" itemprop="datePublished">2009-04-15</time>— in <a href="../../../../index.html" itemprop="genre">Weblog</a></p></aside><nav><a class="prev" href="../../../12/31/web2py_virtualfields_as_an_orm_an_sqlalchemy_approach/index.html">web2py virtualfields as an ORM (an sqlalchemy approach)</a> |<a class="next" href="../../../03/25/subversion_to_mercurial_conversion_completed/index.html">Subversion to Mercurial Conversion Completed.</a><div class="related"><h6>Related Entries <small>(in order of similarity)</small></h6><ul><li><a href="../../../03/25/pygame_event_input_wrapper/index.html">Pygame Event Input Wrapper</a></li><li><a href="../../../03/09/rotate_sprite_towards_point/index.html">Rotate Sprite Towards Point</a></li><li><a href="../../../../2012/10/18/safe_calculator/index.html">Safe Calculator In Python</a></li><li><a href="../../../../2011/08/17/manage_python_virtualenv/index.html">Seemless Python VirtualEnv Integration</a></li><li><a href="../../../../2010/10/10/python_scale_hex_color/index.html">Scale a hex color in Python</a></li><li><a href="../../../../2010/09/03/sqlalchemy_record_instance_item_access/index.html">Getting fresh with SQLAlchemy</a></li></ul></div></nav></article></main><nav class="sidebar"><ul><li class="home"><a href="../../../../../index.html">Home</a></li><li class="weblog active"><a href="../../../../index.html">Weblog</a></li><li class="recipes"><a href="../../../../../recipes/index.html">Recipes</a></li><li class="projects"><a href="../../../../../projects/index.html">Projects</a></li><li class="contact"><a href="../../../../../pages/contact/index.html">Contact</a></li></ul></nav><footer class="footer"><p>&copy; 2017 Thadeus Burgess— <a href="mailto:thadeusb@thadeusb.com" title="E-Mail"><i class="fa fa-fw fa-envelope"></i></a>— <a href="https://github.com/thadeusb" title="GitHub"><i class="fa fa-fw fa-github"></i></a>— <a href="https://www.linkedin.com/in/thadeusb/" title="LinkedIn"><i class="fa fa-fw fa-linkedin"></i></a></p></footer></div><div id="gear-container"><div id="gear"></div></div><script src="../../../../../../ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> <script type="text/javascript" src="https://thadeusb.com/static/gen/app.js?35034e78"></script><!--  GOOGLE ANALYTICS --> <script>var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-7293044-1']);_gaq.push(['_trackPageview']);(function() {  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);})();</script></body>
<!-- Mirrored from thadeusb.com/weblog/2009/04/15/pygame_font_and_py2exe/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 31 Jan 2019 17:05:50 GMT -->
</html>