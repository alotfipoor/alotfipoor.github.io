<!doctype html><html lang="en">
<!-- Mirrored from thadeusb.com/weblog/2011/08/17/manage_python_virtualenv/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 31 Jan 2019 17:05:29 GMT -->
<head><title>Seemless Python VirtualEnv Integration - ThadeusB</title><meta charset="utf-8"><meta name=author content="Thadeus Burgess" /><meta name=description content="How I manage my python virtual environments used across multiple projects"/><meta name=keywords content="python, ai, robots, python, linux, python, bash, linux, virtualenv, seemless, integration, python,"/><meta name=robots content="index, follow" /><link rel="shortcut icon" href="https://thadeusb.com/static/favicon.ico" type="image/x-icon" /><link href="http://fonts.googleapis.com/css?family=Rubik|Aclonica|Averia+Libre" rel="stylesheet"><link href="../../../../../../use.fontawesome.com/aaf60b2b39.css" rel="stylesheet"> <link rel="stylesheet" type="text/css" href="https://thadeusb.com/static/gen/app.css?5d06cfbf"><link rel="stylesheet" type="text/css" media="print" href="https://thadeusb.com/static/gen/print.css?39bef004"><meta name="viewport" content="width=device-width" /><meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@thadeusb"> <meta name="twitter:creator" content="@thadeusb"> <meta name="twitter:title" content="Seemless Python VirtualEnv Integration"> <meta name="twitter:description" content="How I manage my python virtual environments used across multiple projects"> <meta name="twitter:image" content="../../../../../index.html"></head><body class="weblog manage_python_virtualenv  "><div class="container"><header class="header"><h1>Hi, I'm <a href="../../../../../index.html">Thadeus<span>B</span></a>.</h1><small>I code stuff. I raise bees. I game.</small></header><main class="content"><article lang="en" class="weblog" itemscope itemtype="//schema.org/BlogPosting"><link itemprop="url" href="index.html"><header><div id="article-title"></div><h2><a itemprop="name" href="index.html">Seemless Python VirtualEnv Integration</a></h2></header><section><p>At home and at work I end up needing to manage lots of virtual environments for my python projects. The problem with virtual environments has two elements to it. How do you know which environment you are in?How do you remember which virtual environment should go to which project.</p><p>These two problems could easily be solved by following a standard nomenclature, a projects virtual environment should be named after the project. Virtualenv wrapper does a good job of solving the problem of multiple virtual environments spread across multiple projects. Just type in virtualenv-wrapper &lt;name of virtualenv&gt; and the environment is good to go. These two are a gimme.</p><p>Usually I find that remembering the names of the virtual environments or where I put them is still a pain in the behind. Sometimes I will take a branch of my source code, and throw off another virtualenv just for it. What if I happen to be changing directories between the two projects? The virtualenv would just stay with the last one I activated. I also have lately been frustrated that every time I open a new tab in the terminal editor I lose the virtualenv my old terminal was in. More often than not I need to launch command A in one window, and command B in another window, both within the same virtualenv.</p><p>So I hacked up a little bash function that solves the problem for me. I don't need to remember where my virtualenvs are located, and I don't even need to know their names. The basic concept is that I override the <tt class="docutils literal">cd</tt> command with a custom command that will loop through all directories specified to the cd and find a special named file, if this file is located it will source it, activating the virtualenv for me as I cd into the directory!</p><p>I create a special file named “activate.sh” inside that projects root directory. This script contains a simple one line bash command <tt class="docutils literal">source &lt;path/to/virtualenv/bin/activate&gt;</tt>. This way if running <tt class="docutils literal">source activate.sh</tt> it will place that virtualenv as my active environment.</p><p>The first way to search for this file is by scanning every directory from the <tt class="docutils literal">pwd</tt> command. This way no matter where I am at, I might find an <tt class="docutils literal">activate.sh</tt> and activate the environment. This is very useful whenever a new terminal instance is spawned (like opening a new tab in gnome Terminal). It assures I am in the same environment as the tab it just spawned from.</p><p>The second way is to just search all directories that were passed as an argument to the <tt class="docutils literal">cd</tt> command. This way it would only end up activating only when it <tt class="docutils literal">cd</tt> into a directory containing the <tt class="docutils literal">activate.sh</tt> file.</p><p>Low and behold, the code to make my development life so much easier!</p><p>Sample <tt class="docutils literal">activate.sh</tt> file</p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000">source</span> ~/.workspaces/venvs/FlaskEnv/bin/activate
</pre></div><p>Code that lives in <tt class="docutils literal"><span class="pre">~/.bash_aliases</span></tt></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #19177C">activator</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;activate.sh&quot;</span>

<span style="color: #408080; font-style: italic"># Searches entire pwd for activate.sh</span>
<span style="color: #008000; font-weight: bold">function</span> activate_global_cd <span style="color: #666666">{</span>
    <span style="color: #408080; font-style: italic"># Change IFS temporarily for iterating through directories</span>
    <span style="color: #19177C">OLD_IFS</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$IFS</span><span style="color: #BA2121">&quot;</span>
    <span style="color: #19177C">IFS</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;/&quot;</span>

    <span style="color: #19177C">ROOT</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;&quot;</span>

    <span style="color: #408080; font-style: italic"># Actually change directory</span>
    <span style="color: #008000">cd</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$1</span><span style="color: #BA2121">&quot;</span>

    <span style="color: #19177C">_dfiles</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;`pwd`&quot;</span>

    <span style="color: #008000; font-weight: bold">for</span> token in <span style="color: #19177C">$_dfiles</span>
    <span style="color: #008000; font-weight: bold">do</span>
        <span style="color: #19177C">ROOT</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$ROOT$token</span><span style="color: #BA2121">/&quot;</span>
        <span style="color: #19177C">activator</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BB6688; font-weight: bold">${</span><span style="color: #19177C">ROOT</span><span style="color: #BB6688; font-weight: bold">}</span><span style="color: #BA2121">activate.sh&quot;</span>

        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">[</span> -f <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$activator</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">]</span>
        <span style="color: #008000; font-weight: bold">then</span>
            <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;sourcing </span><span style="color: #19177C">$activator</span><span style="color: #BA2121">&quot;</span>
            <span style="color: #008000">source</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$activator</span><span style="color: #BA2121">&quot;</span>
        <span style="color: #008000; font-weight: bold">fi</span>
    <span style="color: #008000; font-weight: bold">done</span>

    <span style="color: #408080; font-style: italic"># Restore IFS to its original state</span>
    <span style="color: #19177C">IFS</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$OLD_IFS</span><span style="color: #BA2121">&quot;</span>
<span style="color: #666666">}</span>

<span style="color: #408080; font-style: italic"># Searches only the arguments directories for activate.sh</span>
<span style="color: #008000; font-weight: bold">function</span> activate_cd <span style="color: #666666">{</span>
    <span style="color: #408080; font-style: italic"># Change IFS temporarily for iterating through directories</span>
    <span style="color: #19177C">OLD_IFS</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$IFS</span><span style="color: #BA2121">&quot;</span>
    <span style="color: #19177C">IFS</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;/&quot;</span>

    <span style="color: #19177C">ROOT</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;`pwd`/&quot;</span>

    <span style="color: #408080; font-style: italic"># Actually change directory</span>
    <span style="color: #008000">cd</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$1</span><span style="color: #BA2121">&quot;</span>

    <span style="color: #19177C">_dfiles</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$1</span><span style="color: #BA2121">&quot;</span>

    <span style="color: #008000; font-weight: bold">for</span> token in <span style="color: #19177C">$_dfiles</span>
    <span style="color: #008000; font-weight: bold">do</span>
        <span style="color: #19177C">ROOT</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$ROOT$token</span><span style="color: #BA2121">/&quot;</span>
        <span style="color: #19177C">activator</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BB6688; font-weight: bold">${</span><span style="color: #19177C">ROOT</span><span style="color: #BB6688; font-weight: bold">}</span><span style="color: #BA2121">activate.sh&quot;</span>

        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">[</span> -f <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$activator</span><span style="color: #BA2121">&quot;</span> <span style="color: #666666">]</span>
        <span style="color: #008000; font-weight: bold">then</span>
            <span style="color: #008000">echo</span> <span style="color: #BA2121">&quot;sourcing </span><span style="color: #19177C">$activator</span><span style="color: #BA2121">&quot;</span>
            <span style="color: #008000">source</span> <span style="color: #BA2121">&quot;</span><span style="color: #19177C">$activator</span><span style="color: #BA2121">&quot;</span>
        <span style="color: #008000; font-weight: bold">fi</span>
    <span style="color: #008000; font-weight: bold">done</span>

    <span style="color: #408080; font-style: italic"># Restore IFS to its original state</span>
    <span style="color: #19177C">IFS</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #19177C">$OLD_IFS</span><span style="color: #BA2121">&quot;</span>
<span style="color: #666666">}</span>

<span style="color: #008000">alias</span> <span style="color: #19177C">cd</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;activate_cd&#39;</span>

<span style="color: #408080; font-style: italic"># Always do a global search when starting a new terminal instance.</span>
activate_global_cd
</pre></div></section><hr><aside><p><span class="article-author" itemprop="author" itemscope itemtype="//schema.org/Person"><span itemprop="name">Thadeus Burgess</span></span><time datetime="2011-08-17" itemprop="datePublished">2011-08-17</time>— in <a href="../../../../index.html" itemprop="genre">Weblog</a></p></aside><nav><a class="prev" href="../../../../2012/10/18/safe_calculator/index.html">Safe Calculator In Python</a> |<a class="next" href="../../../05/31/mount_xoom_honeycomb_in_ubuntu_linux/index.html">Mount Xoom / Honeycomb tablet in Ubuntu Linux</a><div class="related"><h6>Related Entries <small>(in order of similarity)</small></h6><ul><li><a href="../../../../2009/01/18/a_betterbetterpythonconsole_gedit_plugin/index.html">A BetterBetterPythonConsole - GEdit Plugin</a></li><li><a href="../../../../2012/10/18/safe_calculator/index.html">Safe Calculator In Python</a></li><li><a href="../../../05/31/mount_xoom_honeycomb_in_ubuntu_linux/index.html">Mount Xoom / Honeycomb tablet in Ubuntu Linux</a></li><li><a href="../../../04/29/compiz_viewport_switcher_over_window/index.html">Compiz Viewport Switcher Over Window</a></li><li><a href="../../../../2010/10/19/backup_files_safely_on_ubuntu_linux/index.html">Backup files safely on Ubuntu linux</a></li><li><a href="../../../../2010/10/10/python_scale_hex_color/index.html">Scale a hex color in Python</a></li></ul></div></nav></article></main><nav class="sidebar"><ul><li class="home"><a href="../../../../../index.html">Home</a></li><li class="weblog active"><a href="../../../../index.html">Weblog</a></li><li class="recipes"><a href="../../../../../recipes/index.html">Recipes</a></li><li class="projects"><a href="../../../../../projects/index.html">Projects</a></li><li class="contact"><a href="../../../../../pages/contact/index.html">Contact</a></li></ul></nav><footer class="footer"><p>&copy; 2017 Thadeus Burgess— <a href="mailto:thadeusb@thadeusb.com" title="E-Mail"><i class="fa fa-fw fa-envelope"></i></a>— <a href="https://github.com/thadeusb" title="GitHub"><i class="fa fa-fw fa-github"></i></a>— <a href="https://www.linkedin.com/in/thadeusb/" title="LinkedIn"><i class="fa fa-fw fa-linkedin"></i></a></p></footer></div><div id="gear-container"><div id="gear"></div></div><script src="../../../../../../ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> <script type="text/javascript" src="https://thadeusb.com/static/gen/app.js?35034e78"></script><!--  GOOGLE ANALYTICS --> <script>var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-7293044-1']);_gaq.push(['_trackPageview']);(function() {  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);})();</script></body>
<!-- Mirrored from thadeusb.com/weblog/2011/08/17/manage_python_virtualenv/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 31 Jan 2019 17:05:29 GMT -->
</html>